"use strict";(self.webpackChunk_08_router=self.webpackChunk_08_router||[]).push([[611],{2611:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var s=a(5861),r=a(885),n=a(7757),c=a.n(n),i=a(4569),o=a.n(i),l=a(2791),d=a(6871),u=a(4423),m=a(184),h=function(e){var t=e.heroId,a=e.interactable,n=(0,l.useState)(0),i=(0,r.Z)(n,2),d=i[0],h=i[1];(0,l.useEffect)((function(){var e=function(){var e=(0,s.Z)(c().mark((function e(){var a,s=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.length>0&&void 0!==s[0]?s[0]:"",a=u.Yw.concat("/rate"),o().get(a,{params:{heroId:t,userId:Number.parseInt(localStorage.getItem("userId"))}}).then((function(e){e.data.length>0&&h(e.data[0].rate)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=(0,s.Z)(c().mark((function e(){var a,s=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.length>0&&void 0!==s[0]?s[0]:"",a=u.Yw.concat("/rate/average"),o().get(a,{params:{heroId:t,userId:Number.parseInt(localStorage.getItem("userId"))}}).then((function(e){var t=e.data;if(t.length>0){for(var a=0,s=0;s<t.length;s++)a+=t[s].rate;a/=t.length,h(a)}}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a?e():r()}),[]);var p=function(e){if(a){var s=e.currentTarget,r=0;switch(s.id){case"s1":r=2;break;case"s2":r=4;break;case"s3":r=6;break;case"s4":r=8;break;case"s5":r=10}h(r);var n=u.Yw.concat("/rate");o().get(n,{params:{heroId:t,userId:Number.parseInt(localStorage.getItem("userId"))}}).then((function(e){e.data.length>0?o().put(n,{heroId:t,userId:Number.parseInt(localStorage.getItem("userId")),rate:r}).then((function(e){console.log(e.data)})):o().post(n,{heroId:t,userId:Number.parseInt(localStorage.getItem("userId")),rate:r}).then((function(e){console.log(e.data)}))}))}};return(0,m.jsxs)("div",{className:"row spacing col",children:[d>0?(0,m.jsxs)("p",{children:[a?"Your rate":"Average rate",": ",d]}):(0,m.jsx)("p",{children:a?"Rate your hero":"Anyone voted yet..."}),(0,m.jsxs)("div",{className:"col",children:[(0,m.jsx)("span",{id:"s1",onClick:p,"data-testid":"star",className:d>0?"fa fa-star":"fa fa-star-o",style:{color:"yellowgreen"}}),(0,m.jsx)("span",{id:"s2",onClick:p,"data-testid":"star2",className:d>2?"fa fa-star":"fa fa-star-o",style:{color:"yellowgreen"}}),(0,m.jsx)("span",{id:"s3",onClick:p,"data-testid":"star3",className:d>4?"fa fa-star":"fa fa-star-o",style:{color:"yellowgreen"}}),(0,m.jsx)("span",{id:"s4",onClick:p,"data-testid":"star4",className:d>6?"fa fa-star":"fa fa-star-o",style:{color:"yellowgreen"}}),(0,m.jsx)("span",{id:"s5",onClick:p,"data-testid":"star5",className:d>8?"fa fa-star":"fa fa-star-o",style:{color:"yellowgreen"}})]})]})},p=function(e){var t=e.heroId,a=(0,l.useState)(!1),n=(0,r.Z)(a,2),i=n[0],d=n[1];(0,l.useEffect)((function(){var e=function(){var e=(0,s.Z)(c().mark((function e(){var a,s=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.length>0&&void 0!==s[0]?s[0]:"",a=u.Yw.concat("/upvote"),o().get(a,{params:{heroId:t,userId:Number.parseInt(localStorage.getItem("userId"))}}).then((function(e){d(e.data.length>0)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);return(0,m.jsx)("div",{className:"col-3 center-self",children:(0,m.jsx)("i",{onClick:function(e){var a=e.currentTarget;d(!a.classList.contains("fa-heart"));var s=u.Yw.concat("/upvote"),r={heroId:t,userId:Number.parseInt(localStorage.getItem("userId"))};i?o().delete(s,{params:r}).then((function(e){console.log(e.data)})):o().post(s,{heroId:t,userId:Number.parseInt(localStorage.getItem("userId"))}).then((function(e){console.log(e.data)}))},"data-testid":"heart",className:i?"fa fa-heart":"fa fa-heart-o"})})},f=function(e){var t=e.heroId,a=e.heroName,s=e.description,r=e.thumbnail;return(0,m.jsxs)("div",{className:"card black-background",style:{width:"27rem"},children:[(0,m.jsx)(h,{heroId:t,interactable:!1}),(0,m.jsx)("img",{src:r,className:"card-img-top detail-img",alt:a}),(0,m.jsxs)("div",{className:"card-body",children:[(0,m.jsxs)("div",{className:"row align-items-start",children:[(0,m.jsx)(p,{heroId:t}),(0,m.jsx)(h,{heroId:t,interactable:!0})]}),(0,m.jsx)("hr",{}),(0,m.jsx)("h5",{className:"card-title","data-testid":"heroName",children:a}),(0,m.jsx)("br",{}),""===s?(0,m.jsx)("div",{"data-testid":"no-description",children:"???"}):(0,m.jsx)("p",{"data-testid":"description",className:"card-text description-text",children:s})]})]})},g=function(e){var t=e.comics,a=e.comicUrl,s=e.events,r=e.series,n=e.stories,c=e.heroId,i=e.heroName,o=e.description,l=e.thumbnail;return(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{children:[(0,m.jsx)("button",{className:"btn custom-button spacing",type:"button","data-bs-toggle":"collapse","data-bs-target":"#comics","aria-expanded":"false","aria-controls":"comics",children:"Comics"}),(0,m.jsx)("button",{className:"btn custom-button spacing",type:"button","data-bs-toggle":"collapse","data-bs-target":"#events","aria-expanded":"false","aria-controls":"events",children:"Events"}),(0,m.jsx)("button",{className:"btn custom-button spacing",type:"button","data-bs-toggle":"collapse","data-bs-target":"#series","aria-expanded":"false","aria-controls":"series",children:"Series"}),(0,m.jsx)("button",{className:"btn custom-button spacing",type:"button","data-bs-toggle":"collapse","data-bs-target":"#stories","aria-expanded":"false","aria-controls":"stories",children:"Stories"})]}),(0,m.jsxs)("div",{className:"row",children:[(0,m.jsx)("div",{className:"col",children:(0,m.jsx)("div",{className:"collapse multi-collapse show","data-testid":"heroDetail",id:"heroDetail",children:(0,m.jsx)(f,{heroId:c,heroName:i,description:o,thumbnail:l})})}),(0,m.jsx)("div",{className:"col",children:(0,m.jsx)("div",{className:"collapse multi-collapse show",id:"comics",children:(0,m.jsxs)("ul",{className:"list-group","data-testid":"comics",children:[t.length>0?t.map((function(e){return(0,m.jsx)("li",{className:"list-group-item black-background li-custom",children:e.name},e.name)})):"Has not appeared in comics",t.length>0&&""!==a?(0,m.jsx)("a",{href:a,className:"btn custom-button",type:"button",children:"Go to Comics"}):""]})})}),(0,m.jsx)("div",{className:"col",children:(0,m.jsx)("div",{className:"collapse multi-collapse show",id:"events",children:(0,m.jsx)("ul",{className:"list-group","data-testid":"events",children:s.length>0?s.map((function(e){return(0,m.jsx)("li",{className:"list-group-item black-background li-custom",children:e.name},e.name)})):"Has not appeared in events"})})}),(0,m.jsx)("div",{className:"col",children:(0,m.jsx)("div",{className:"collapse multi-collapse show",id:"series",children:(0,m.jsx)("ul",{className:"list-group","data-testid":"series",children:r.length>0?r.map((function(e){return(0,m.jsx)("li",{className:"list-group-item black-background li-custom",children:e.name},e.name)})):"Has not appeared in series"})})}),(0,m.jsx)("div",{className:"col",children:(0,m.jsx)("div",{className:"collapse multi-collapse show",id:"stories",children:(0,m.jsx)("ul",{className:"list-group","data-testid":"stories",children:n.length>0?n.map((function(e){return(0,m.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-start black-background li-custom",children:[(0,m.jsx)("div",{children:e.name}),(0,m.jsx)("span",{className:"badge bg-primary rounded-pill",children:e.type})]},e.name)})):"Has not appeared in stories"})})})]})]})},x=function(e){var t=e.username,a=e.description;return(0,m.jsxs)("div",{className:"custom-card black-background text-left spacing",children:[(0,m.jsx)("h5",{className:"card-header","data-testid":"username",children:t}),(0,m.jsx)("div",{className:"card-body li-custom",children:a.split("\n").map((function(e){return(0,m.jsx)("p",{className:"card-text","data-testid":"description",children:e},a.indexOf(e))}))})]})},v=function(e){var t=e.heroId,a=(0,l.useState)(new Array),s=(0,r.Z)(a,2),n=s[0],c=s[1];return(0,l.useEffect)((function(){var e=u.Yw.concat("/comment");o().get(e,{params:{heroId:t}}).then((function(e){e.data.length>0&&c(e.data)}))}),[]),(0,m.jsx)("div",{className:"spacing",children:n.length<=0?(0,m.jsx)("div",{"data-testid":"no-comments",children:"No comments"}):(0,m.jsx)("div",{className:"spacing","data-testid":"comments",children:n.map((function(e){return(0,m.jsx)(x,{username:e.username,description:e.comment},e.id)}))})})},b=function(e){var t=e.heroId,a=(0,l.useState)(""),s=(0,r.Z)(a,2),n=s[0],c=s[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"mb-3 spacing container center",children:[(0,m.jsx)("textarea",{onChange:function(e){return c(e.target.value)},placeholder:"Leave a comment...",rows:5,maxLength:300,className:"form-control black-background","data-testid":"description"}),(0,m.jsx)("button",{type:"button",onClick:function(){if(!(n.length<=0)){var e=u.Yw.concat("/comment");o().post(e,{heroId:t,userId:Number.parseInt(localStorage.getItem("userId")),comment:n}).then((function(e){window.location.reload()}))}},className:"btn custom-button spacing go-right","aria-label":"submit","data-testid":"submit",children:"Submit"})]}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)(v,{heroId:t})]})},j=function(){var e=(0,l.useState)(!0),t=(0,r.Z)(e,2),a=t[0],n=t[1],i=(0,d.TH)(),h=(0,l.useState)(""),p=(0,r.Z)(h,2),f=p[0],x=p[1],v=(0,l.useState)(""),j=(0,r.Z)(v,2),N=j[0],I=j[1],w=(0,l.useState)(""),y=(0,r.Z)(w,2),k=y[0],S=y[1],Z=(0,l.useState)(""),C=(0,r.Z)(Z,2),Y=C[0],A=C[1],H=(0,l.useState)(new Array),E=(0,r.Z)(H,2),L=E[0],T=E[1],_=(0,l.useState)(new Array),D=(0,r.Z)(_,2),F=D[0],U=D[1],G=(0,l.useState)(new Array),O=(0,r.Z)(G,2),R=O[0],q=O[1],z=(0,l.useState)(new Array),B=(0,r.Z)(z,2),J=B[0],K=B[1];return(0,l.useEffect)((function(){var e=function(){var e=(0,s.Z)(c().mark((function e(){var t,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.length>0&&void 0!==a[0]?a[0]:"",t=u.T5.concat("/hero/getHeroDetail?characterId=")+i.state,o().get(t).then((function(e){var t=e.data.data.results[0];x(t.name),I(t.description),S(t.thumbnail.path+"."+t.thumbnail.extension);var a=(t.urls||[]).find((function(e){return"comiclink"===e.type}));A(void 0!==a&&null!==a?a.url:""),T(t.comics.items),U(t.events.items),q(t.series.items),K(t.stories.items),n(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,m.jsx)(m.Fragment,{children:a?(0,m.jsx)("div",{className:"d-flex justify-content-center",children:(0,m.jsx)("div",{className:"spinner-border",role:"status",children:(0,m.jsx)("span",{className:"sr-only",children:"Loading..."})})}):(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"container-fluid ",children:(0,m.jsx)(g,{comics:L,events:F,series:R,stories:J,heroName:f,description:N,thumbnail:k,heroId:i.state,comicUrl:Y})}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)(b,{heroId:i.state})]})})}}}]);
//# sourceMappingURL=611.7ff1d30f.chunk.js.map